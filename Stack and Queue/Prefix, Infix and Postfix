#include<bits/stdc++.h>
using namespace std;
int priority( char op){
    if( op == '^') return 1;
    if( op == '+' || op == '-') return 2;
    if( op == '*' || op == '/') return 3;
    return 0;
}
// Infix to postfix
string infixToPost( string s ){
    stack<char> st;
    string ans = " ";
    int i =0;
    int n = s.lenght();
    while( i < n){
        char c = s[i];
        if( ( c >= 'a' && c <= 'z') || ( c >= 'A' && c <= 'Z') || ( c >= '0' && c <= '9')){
            ans += c;
        }
        else if( c == '('){
            st.push(c);
        }
        else if( c == ')'){
            while( !st.empty() && st.top() != '('){
                ans += st.top();
                st.pop();
            }
            if( !st.empty()) st.pop();
        }
        else{
            while( !st.empty() && priority( st.top()) >= priority(c)){
                ans += st.top();
                st.pop();
            }
            st.push(c);
        }
        i++;
    }
    while(!st.empty()){
        ans += st.top();
        st.pop();
    }
    return ans;
}

// Infix to Prefix
string infixToPre( string s){
    reverse(s.begin(), s.end());
    int i = 0;
    int n  = s.length();
    stack<char> st;
    string ans = " ";
    while( i < n){
        char c = s[i];
        if( ( c >= 'a' && c <= 'z') || ( c >= 'A' && c <= 'Z') || ( c >= '0' && c <= '9')){
            ans += c;
        }
        else if( c == ')'){
            st.push(c);
        }
        else if( c == '('){
            while( !st.empty() && st.top() != ')'){
                ans += st.top();
                st.pop();
            }
            if( !st.empty()) st.pop();
        }
        else{
            while( !st.empty() && priority( st.top()) > priority(c)){
                ans += st.top();
                st.pop();
            }
            st.push(c);
        }
        i++;
    }
    while(!st.empty()){
        ans += st.top();
        st.pop();
    }
    reverse( ans.begin(), ans.end());
    return ans;
}

// Postfix to infix
string postToInfix( string s){
    stack<string> st;
    int i =0;
    int n = s.length();
    while( i < n){
        char c = s[i];
        if( ( c >= 'a' && c <= 'z') || ( c >= 'A' && c <= 'Z') || ( c >= '0' && c <= '9')){
            string op(1, c);
            st.push(op);
        }
        else{
            string op2 = st.top(); st.pop();
            string op1 = st.top(); st.pop();
            string exp = "(" + op1 + c + op2 + ")";
            st.push(exp);
        }
        i++;
    }
    return st.top();
}
// Prefix to Infix
string preToInfix( string s){
    stack<string> st;
    int i = s.length() -1;
    while( i >= 0){
        char c = s[i];
        if( ( c >= 'a' && c <= 'z') || ( c >= 'A' && c <= 'Z') || ( c >= '0' && c <= '9')){
            string op(1, c);
            st.push(op);
        }
        else{
            string op1 = st.top(); st.pop();
            string op2 = st.top(); st.pop();
            string exp = "(" + op1 + c + op2 + ")";
            st.push(exp);
        }
        i--;
    }
    return st.top();
}
