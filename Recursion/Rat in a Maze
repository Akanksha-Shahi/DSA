#include <iostream>
#include <vector>
using namespace std;
void solve ( int i, int j , vector<vector<int>> &a, int n, vector<string> &ans, string path, 
     vector<vector<int>> &visited){
    // base case
    if ( i== n-1 && j== n-1){
        ans.push_back(path);
        return;
    }
    // down
    if ( i+1< n && a[i+1][j] ==1 && visited[i+1][j] ==0){
        visited[i][j]= 1;
        path.push_back('D');
        solve( i+1, j, a, n, ans, path, visited);
        path.pop_back(); // backtrack
        visited[i][j]= 0;
    }
    // left
    if ( j-1>=0 && a[i][j-1] ==1 && visited[i][j-1] ==0){
        visited[i][j]= 1;
        path.push_back('L');
        solve( i, j-1, a, n, ans, path, visited);
        path.pop_back(); // backtrack
        visited[i][j]= 0;
    }
    // right
    if ( j+1< n && a[i][j+1] ==1 && visited[i][j+1] ==0){
        visited[i][j]= 1;
        path.push_back('R');
        solve( i, j+1, a, n, ans, path, visited);
        path.pop_back(); // backtrack
        visited[i][j]= 0;
    }
    // up
    if ( i-1>=0 && a[i-1][j] ==1 && visited[i-1][j] ==0){
        visited[i][j]= 1;
        path.push_back('U');
        solve( i-1, j, a, n, ans, path, visited);
        path.pop_back(); // backtrack
        visited[i][j]= 0;
    }
}
vector<string> findpath(vector<vector<int>> &m, int n) {
    vector<string> ans;
    vector<vector<int>> visited( n, vector<int>(n,0));
    if ( m[0][0] == 1) solve( 0, 0, m, n, ans, "", visited);
    return ans;
}
int main(){
    vector<vector<int>> m= {
        {1, 0, 0, 0},
        {1, 1, 0, 1},
        {1, 1, 0, 0},
        {0, 1, 1, 1}
    };
    int n=4;
    vector<string> ans= findpath(m, n);
    for ( auto it: ans){
        cout<< it<< endl;
    }
    return 0;
}
